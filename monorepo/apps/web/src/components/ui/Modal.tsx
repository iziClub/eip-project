"use client";

import { useModalStore } from "@/stores/ModalStore";
import Button from "./Button";

export default function Modal() {
  const { isOpen, title, content, onSave, onCancel, closeModal } = useModalStore();

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50">
      <div className="bg-white p-6 rounded-lg shadow-md w-full max-w-[700px]">
        <div className="flex justify-between border-b border-grey-2 pb-2">
          <h2 className="text-lg font-semibold text-black">{title}</h2>
          <button onClick={closeModal} className="cursor-pointer">
            <svg width="20" height="20" viewBox="0 0 20 20" className="fill-grey-3 hover:fill-red-primary transition-colors" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M10.0167 11.9035L17.6987 19.5854C17.9548 19.8328 18.2978 19.9697 18.6538 19.9666C19.0099 19.9635 19.3505 19.8207 19.6023 19.5689C19.854 19.3171 19.9969 18.9765 19.9999 18.6205C20.003 18.2644 19.8662 17.9214 19.6188 17.6653L11.9368 9.98331L19.6188 2.30135C19.8662 2.04523 20.003 1.70221 19.9999 1.34616C19.9969 0.990106 19.854 0.649513 19.6023 0.397737C19.3505 0.145961 19.0099 0.00314533 18.6538 5.13344e-05C18.2978 -0.00304266 17.9548 0.133832 17.6987 0.381195L10.0167 8.06316L2.33472 0.381195C2.07745 0.139946 1.73642 0.00825272 1.38378 0.0139789C1.03115 0.0197052 0.694568 0.162402 0.445271 0.411876C0.195974 0.66135 0.0535141 0.998028 0.0480374 1.35067C0.0425606 1.70331 0.174496 2.04425 0.415926 2.30135L8.09653 9.98331L0.414568 17.6653C0.284869 17.7905 0.181417 17.9404 0.110248 18.1061C0.0390791 18.2717 0.00161811 18.4499 5.12725e-05 18.6302C-0.00151556 18.8106 0.0328428 18.9894 0.101122 19.1563C0.169401 19.3231 0.270234 19.4748 0.397736 19.6023C0.525239 19.7298 0.676857 19.8306 0.843745 19.8989C1.01063 19.9672 1.18945 20.0015 1.36976 20C1.55007 19.9984 1.72826 19.9609 1.89393 19.8898C2.05961 19.8186 2.20945 19.7151 2.33472 19.5854L10.0167 11.9035Z" />
            </svg>
          </button>
        </div>
        <div className="pt-5">
          {content}
        </div>

        <div className="flex justify-end gap-2 mt-6">
          <Button
            variant="grey"
            onClick={() => {
              onCancel?.();
              closeModal();
            }}
          >
            <span className="text-black text-sm">Annuler</span>
            <svg width="16" height="16" viewBox="0 0 20 20" className="fill-black transition-colors" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M10.0167 11.9035L17.6987 19.5854C17.9548 19.8328 18.2978 19.9697 18.6538 19.9666C19.0099 19.9635 19.3505 19.8207 19.6023 19.5689C19.854 19.3171 19.9969 18.9765 19.9999 18.6205C20.003 18.2644 19.8662 17.9214 19.6188 17.6653L11.9368 9.98331L19.6188 2.30135C19.8662 2.04523 20.003 1.70221 19.9999 1.34616C19.9969 0.990106 19.854 0.649513 19.6023 0.397737C19.3505 0.145961 19.0099 0.00314533 18.6538 5.13344e-05C18.2978 -0.00304266 17.9548 0.133832 17.6987 0.381195L10.0167 8.06316L2.33472 0.381195C2.07745 0.139946 1.73642 0.00825272 1.38378 0.0139789C1.03115 0.0197052 0.694568 0.162402 0.445271 0.411876C0.195974 0.66135 0.0535141 0.998028 0.0480374 1.35067C0.0425606 1.70331 0.174496 2.04425 0.415926 2.30135L8.09653 9.98331L0.414568 17.6653C0.284869 17.7905 0.181417 17.9404 0.110248 18.1061C0.0390791 18.2717 0.00161811 18.4499 5.12725e-05 18.6302C-0.00151556 18.8106 0.0328428 18.9894 0.101122 19.1563C0.169401 19.3231 0.270234 19.4748 0.397736 19.6023C0.525239 19.7298 0.676857 19.8306 0.843745 19.8989C1.01063 19.9672 1.18945 20.0015 1.36976 20C1.55007 19.9984 1.72826 19.9609 1.89393 19.8898C2.05961 19.8186 2.20945 19.7151 2.33472 19.5854L10.0167 11.9035Z" />
            </svg>
          </Button>
          {onSave &&          
            <Button
              variant="save"
              onClick={() => {
                onSave();
                closeModal();
              }}
              >
                <span className="text-white text-sm">Sauvegarder</span>
                <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fillRule="evenodd" clipRule="evenodd" d="M2 0C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2V18C0 18.5304 0.210714 19.0391 0.585786 19.4142C0.960859 19.7893 1.46957 20 2 20H14C14.5304 20 15.0391 19.7893 15.4142 19.4142C15.7893 19.0391 16 18.5304 16 18V4.414C15.9999 3.88361 15.7891 3.37499 15.414 3L13 0.586C12.625 0.210901 12.1164 0.000113275 11.586 0H2ZM2 2H11.586L14 4.414V18H2V2ZM12.238 8.793C12.3335 8.70075 12.4097 8.59041 12.4621 8.4684C12.5145 8.3464 12.5421 8.21518 12.5433 8.0824C12.5444 7.94962 12.5191 7.81794 12.4688 7.69505C12.4185 7.57215 12.3443 7.4605 12.2504 7.3666C12.1565 7.27271 12.0449 7.19846 11.922 7.14818C11.7991 7.0979 11.6674 7.0726 11.5346 7.07375C11.4018 7.0749 11.2706 7.10249 11.1486 7.1549C11.0266 7.20731 10.9162 7.28349 10.824 7.379L6.582 11.622L5.167 10.207C4.9784 10.0248 4.7258 9.92405 4.4636 9.92633C4.2014 9.9286 3.95059 10.0338 3.76518 10.2192C3.57977 10.4046 3.4746 10.6554 3.47233 10.9176C3.47005 11.1798 3.57084 11.4324 3.753 11.621L5.803 13.672C5.90515 13.7742 6.02644 13.8553 6.15993 13.9106C6.29342 13.9659 6.4365 13.9944 6.581 13.9944C6.7255 13.9944 6.86858 13.9659 7.00207 13.9106C7.13556 13.8553 7.25685 13.7742 7.359 13.672L12.238 8.793Z" fill="white"/>
                </svg>
              </Button>
          }
        </div>
      </div>
    </div>
  );
}
