import Button from "./Button";
import TextInput from "./TextInput";
import { useModalStore } from "@/stores/ModalStore";

export interface TextModifierProps {
  label: string;
  value: string;
  onSave: (newValue: string) => void;
}

const TextModifier: React.FC<TextModifierProps> = ({
    label,
    value,
    onSave,
    }) => {
    const openModal = useModalStore((state) => state.openModal);

    const handleOpen = () => {
        let tempValue = value; // copie locale modifiable

        openModal({
        title: `Modifier le ${label}`,
        content: (
            <TextInput
            defaultValue={value}
            onChange={(e) => (tempValue = e.target.value)}
            />
        ),
        onSave: () => onSave(tempValue),
        });
    };
    return (
        <div className="">
            <p className="text-base font-semibold text-black mb-2">{label}</p>
            <div className="flex flex-row w-full justify-between">
                <TextInput className="w-full" inputClassName="" disabled={true} value={value}/>
                <Button onClick={handleOpen} variant="modifier" size="full" className="ml-4">
                    <svg className="fill-blue-secondary group-hover/button:fill-white" width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.6665 0.878941C13.205 0.340338 13.9282 0.0266971 14.6893 0.00162726C15.4505 -0.0234425 16.1928 0.241936 16.7655 0.743941L16.9095 0.878941L17.6165 1.58594C18.1548 2.12436 18.4683 2.84732 18.4934 3.60828C18.5184 4.36924 18.2532 5.11126 17.7515 5.68394L17.6165 5.82794L6.40452 17.0409C6.24599 17.1995 6.05395 17.3204 5.84252 17.3949L5.68052 17.4419L1.22652 18.4699C1.07046 18.5062 0.90796 18.5045 0.75271 18.4649C0.59746 18.4253 0.454004 18.3489 0.334422 18.2423C0.214841 18.1356 0.122636 18.0018 0.0655711 17.8521C0.00850669 17.7024 -0.011746 17.5411 0.00651866 17.3819L0.0265186 17.2689L1.05352 12.8139C1.10425 12.5954 1.20335 12.3911 1.34352 12.2159L1.45452 12.0909L12.6665 0.878941ZM11.9595 4.41394L2.96952 13.4039L2.33352 16.1619L5.09152 15.5249L14.0815 6.53494L11.9595 4.41394ZM15.4955 2.29294C15.3233 2.12076 15.0942 2.01733 14.8512 2.00205C14.6082 1.98677 14.3679 2.06069 14.1755 2.20994L14.0815 2.29294L13.3735 2.99994L15.4955 5.12094L16.2025 4.41394C16.3747 4.24175 16.4781 4.01265 16.4934 3.76962C16.5087 3.5266 16.4348 3.28634 16.2855 3.09394L16.2025 2.99994L15.4955 2.29294Z"/>
                    </svg>
                </Button>
            </div>
        </div>
    );
}

export default TextModifier;